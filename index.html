<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>3D n-body simulation on WebGPU</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <canvas id="canvas"></canvas>
  <button id="toggleSettings">&gt;</button>
  <div id="controls" class="right-dark">
    <h2>3D n-body on WebGPU</h2>
    <div class="control-group">
      <b>Performance</b>
      <br>
      Resolution: <span id="res"></span>
      <br>
      <span class="halfWidth">
        FPS: <span id="fps"></span>
        <br>
        Frame: <span id="frameTime"></span> ms
        <br>
        JS: <span id="jsTime"></span> ms
      </span>
      <span class="halfWidth">
        Compute: <span id="computeTime"></span> ms
        <br>
        Render: <span id="renderTime"></span> ms
        <br>
        Particles: <span id="nBodies"></span>
      </span>
    </div>
    <hr>
    <div class="control-group">
      <b>Camera state</b>
      <br>
      FOV: <span id="camFOV"></span>&deg;
      <br>
      Dst: <span id="camDist"></span>
      <br>
      Tgt: <span id="camTarget"></span>
      <br>
      Pos: <span id="camPos"></span>
      <br>
      Alt/az: <span id="camAlt"></span>&deg;, <span id="camAz"></span>&deg;
    </div>
    <hr>
    <div class="control-group">
      <b>Sim controls</b>
      <!-- <div>
        <select id="visualization">
          <option value="1">Velocity magnitude</option>
        </select>
        <label for="visualization">Visualization mode</label>
      </div> -->
      <div>
        <input id="dt" type="range" min="-5" max="-3" step="0.01" value="-4">
        <label for="dt">dt: 10^<span id="dtValue">-4.00</span>
        </label>
        <br>
        <input id="G" type="range" min="-6" max="0" step="0.01" value="-4">
        <label for="G">G: 10^<span id="GValue">-4.00</span>
        </label>
      </div>
      <div>
        <input id="minBodies" type="number" min="1000" max="50000" value="20000">
        <label for="minBodies">Min bodies/galaxy</label>
        <br>
        <input id="maxBodies" type="number" min="1001" max="50000" value="20000">
        <label for="maxBodies">Max bodies/galaxy</label>
        <br>
        <input id="numGalaxies" type="number" min="1" max="10" value="2">
        <label for="numGalaxies">Number of galaxies</label>
      </div>
      <div>
        <button id="toggleSim">Play / Pause</button>
        <button id="restartSim">Regenerate</button>
      </div>
    </div>
    <hr>
    <div class="control-group">
      <b>Import/export sim state</b>
      <div>
        <input type="file" id="bufferInput">
      </div>
      <div>
        <button id="export">Export</button>
        <button id="import">Import</button>
      </div>
    </div>
    <hr>
    <div class="control-group">
      <b>Camera controls</b>
      <div>
        Orbit: leftclick / arrows
        <br>
        Pan: rightclick / wasd
        <br>
        Zoom: scroll / fc
        <br>
        FOV zoom: ctrl+scroll / ctrl+fc
        <br>
        FOV: alt+scroll / alt+fc
        <br>
        Reset view: middleclick / space
        <br>
        Reset FOV: ctrl+middleclick / ctrl+space
      </div>
    </div>
    <p></p>
  </div>
  <script src="./util.js"></script>
  <script src="./matrix.js"></script>
  <script src="./camera.js"></script>
  <script src="./nbody3d.js"></script>
</body>

</html>